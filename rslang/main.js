/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";const t=(t,n)=>{const e=document.createElement(t);return n&&e.classList.add(n),e},n=t=>document.querySelector(t);function e(t,n){var e=[];return function(t,n,e){void 0===e&&(e={});var r=e.decode,a=void 0===r?function(t){return t}:r;return function(e){var r=t.exec(e);if(!r)return!1;for(var i=r[0],o=r.index,c=Object.create(null),s=function(t){if(void 0===r[t])return"continue";var e=n[t-1];"*"===e.modifier||"+"===e.modifier?c[e.name]=r[t].split(e.prefix+e.suffix).map((function(t){return a(t,e)})):c[e.name]=a(r[t],e)},u=1;u<r.length;u++)s(u);return{path:i,index:o,params:c}}}(o(t,e,n),e,n)}function r(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function a(t){return t&&t.sensitive?"":"i"}function i(t,n,e){return function(t,n,e){void 0===e&&(e={});for(var i=e.strict,o=void 0!==i&&i,c=e.start,s=void 0===c||c,u=e.end,l=void 0===u||u,f=e.encode,h=void 0===f?function(t){return t}:f,p=e.delimiter,d=void 0===p?"/#?":p,v=e.endsWith,m="[".concat(r(void 0===v?"":v),"]|$"),g="[".concat(r(d),"]"),b=s?"^":"",y=0,x=t;y<x.length;y++){var w=x[y];if("string"==typeof w)b+=r(h(w));else{var E=r(h(w.prefix)),A=r(h(w.suffix));if(w.pattern)if(n&&n.push(w),E||A)if("+"===w.modifier||"*"===w.modifier){var P="*"===w.modifier?"?":"";b+="(?:".concat(E,"((?:").concat(w.pattern,")(?:").concat(A).concat(E,"(?:").concat(w.pattern,"))*)").concat(A,")").concat(P)}else b+="(?:".concat(E,"(").concat(w.pattern,")").concat(A,")").concat(w.modifier);else"+"===w.modifier||"*"===w.modifier?b+="((?:".concat(w.pattern,")").concat(w.modifier,")"):b+="(".concat(w.pattern,")").concat(w.modifier);else b+="(?:".concat(E).concat(A,")").concat(w.modifier)}}if(l)o||(b+="".concat(g,"?")),b+=e.endsWith?"(?=".concat(m,")"):"$";else{var O=t[t.length-1],R="string"==typeof O?g.indexOf(O[O.length-1])>-1:void 0===O;o||(b+="(?:".concat(g,"(?=").concat(m,"))?")),R||(b+="(?=".concat(g,"|").concat(m,")"))}return new RegExp(b,a(e))}(function(t,n){void 0===n&&(n={});for(var e=function(t){for(var n=[],e=0;e<t.length;){var r=t[e];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)n.push({type:"CHAR",index:e,value:t[e++]});else{var a=1,i="";if("?"===t[c=e+1])throw new TypeError('Pattern cannot start with "?" at '.concat(c));for(;c<t.length;)if("\\"!==t[c]){if(")"===t[c]){if(0==--a){c++;break}}else if("("===t[c]&&(a++,"?"!==t[c+1]))throw new TypeError("Capturing groups are not allowed at ".concat(c));i+=t[c++]}else i+=t[c++]+t[c++];if(a)throw new TypeError("Unbalanced pattern at ".concat(e));if(!i)throw new TypeError("Missing pattern at ".concat(e));n.push({type:"PATTERN",index:e,value:i}),e=c}else{for(var o="",c=e+1;c<t.length;){var s=t.charCodeAt(c);if(!(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||95===s))break;o+=t[c++]}if(!o)throw new TypeError("Missing parameter name at ".concat(e));n.push({type:"NAME",index:e,value:o}),e=c}else n.push({type:"CLOSE",index:e,value:t[e++]});else n.push({type:"OPEN",index:e,value:t[e++]});else n.push({type:"ESCAPED_CHAR",index:e++,value:t[e++]});else n.push({type:"MODIFIER",index:e,value:t[e++]})}return n.push({type:"END",index:e,value:""}),n}(t),a=n.prefixes,i=void 0===a?"./":a,o="[^".concat(r(n.delimiter||"/#?"),"]+?"),c=[],s=0,u=0,l="",f=function(t){if(u<e.length&&e[u].type===t)return e[u++].value},h=function(t){var n=f(t);if(void 0!==n)return n;var r=e[u],a=r.type,i=r.index;throw new TypeError("Unexpected ".concat(a," at ").concat(i,", expected ").concat(t))},p=function(){for(var t,n="";t=f("CHAR")||f("ESCAPED_CHAR");)n+=t;return n};u<e.length;){var d=f("CHAR"),v=f("NAME"),m=f("PATTERN");if(v||m){var g=d||"";-1===i.indexOf(g)&&(l+=g,g=""),l&&(c.push(l),l=""),c.push({name:v||s++,prefix:g,suffix:"",pattern:m||o,modifier:f("MODIFIER")||""})}else{var b=d||f("ESCAPED_CHAR");if(b)l+=b;else if(l&&(c.push(l),l=""),f("OPEN")){g=p();var y=f("NAME")||"",x=f("PATTERN")||"",w=p();h("CLOSE"),c.push({name:y||(x?s++:""),pattern:y&&!x?o:x,prefix:g,suffix:w,modifier:f("MODIFIER")||""})}else h("END")}}return c}(t,e),n,e)}function o(t,n,e){return t instanceof RegExp?function(t,n){if(!n)return t;for(var e=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,a=e.exec(t.source);a;)n.push({name:a[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),a=e.exec(t.source);return t}(t,n):Array.isArray(t)?function(t,n,e){var r=t.map((function(t){return o(t,n,e).source}));return new RegExp("(?:".concat(r.join("|"),")"),a(e))}(t,n,e):i(t,n,e)}function c(t){try{return decodeURIComponent(t)}catch(n){return t}}function s(t,n,r,a,i){var o,c,u=0;return{next:function(l){if(t===l)return{done:!0,value:!1};if(!o){var f=t,h=!f.children;if(f.match||(f.match=e(f.path||"",Object.assign({end:h},r))),o=f.match(a)){var p=o.path;return o.path=h||"/"!==p.charAt(p.length-1)?p:p.substr(1),o.params=Object.assign({},i,o.params),{done:!1,value:{route:t,baseUrl:n,path:o.path,params:o.params}}}}if(o&&t.children)for(;u<t.children.length;){if(!c){var d=t.children[u];d.parent=t,c=s(d,n+o.path,r,a.substr(o.path.length),o.params)}var v=c.next(l);if(!v.done)return{done:!1,value:v.value};c=null,u++}return{done:!0,value:!1}}}}function u(t,n){if("function"==typeof t.route.action)return t.route.action(t,n)}const l=function(){function t(t,n){if(!t||"object"!=typeof t)throw new TypeError("Invalid routes");this.options=Object.assign({decode:c},n),this.baseUrl=this.options.baseUrl||"",this.root=Array.isArray(t)?{path:"",children:t,parent:null}:t,this.root.parent=null}return t.prototype.resolve=function(t){var n,e,r=this,a=Object.assign({router:this},this.options.context,"string"==typeof t?{pathname:t}:t),i=s(this.root,this.baseUrl,this.options,a.pathname.substr(this.baseUrl.length)),o=this.options.resolveRoute||u,c=a;function l(t,r,s){void 0===r&&(r=!n.done&&n.value.route);var u=null===s&&!n.done&&n.value.route;if(n=e||i.next(u),e=null,!t&&(n.done||!function(t,n){for(var e=n;e;)if((e=e.parent)===t)return!0;return!1}(r,n.value.route)))return e=n,Promise.resolve(null);if(n.done){var f=new Error("Route not found");return f.status=404,Promise.reject(f)}return c=Object.assign({},a,n.value),Promise.resolve(o(c,n.value.params)).then((function(n){return null!=n?n:l(t,r,n)}))}return a.next=l,Promise.resolve().then((function(){return l(!0,r.root)})).catch((function(t){if(r.options.errorHandler)return r.options.errorHandler(t,c);throw t}))},t}();function f(){return f=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},f.apply(this,arguments)}var h;!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(h||(h={}));var p="beforeunload";function d(t){t.preventDefault(),t.returnValue=""}function v(){var t=[];return{get length(){return t.length},push:function(n){return t.push(n),function(){t=t.filter((function(t){return t!==n}))}},call:function(n){t.forEach((function(t){return t&&t(n)}))}}}let m,g,b=function(t){void 0===t&&(t={});var n=t.window,e=void 0===n?document.defaultView:n,r=e.history;function a(){var t=e.location,n=t.pathname,a=t.search,i=t.hash,o=r.state||{};return[o.idx,{pathname:n,search:a,hash:i,state:o.usr||null,key:o.key||"default"}]}var i=null;e.addEventListener("popstate",(function(){if(i)m.call(i),i=null;else{var t=h.Pop,n=a(),e=n[0],r=n[1];if(m.length){if(null!=e){var o=s-e;o&&(i={action:t,location:r,retry:function(){E(-1*o)}},E(o))}}else w(t)}}));var o=h.Pop,c=a(),s=c[0],u=c[1],l=v(),m=v();function g(t){return"string"==typeof t?t:(e=(n=t).pathname,r=void 0===e?"/":e,a=n.search,i=void 0===a?"":a,o=n.hash,c=void 0===o?"":o,i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),c&&"#"!==c&&(r+="#"===c.charAt(0)?c:"#"+c),r);var n,e,r,a,i,o,c}function b(t,n){return void 0===n&&(n=null),f({pathname:u.pathname,hash:"",search:""},"string"==typeof t?function(t){var n={};if(t){var e=t.indexOf("#");e>=0&&(n.hash=t.substr(e),t=t.substr(0,e));var r=t.indexOf("?");r>=0&&(n.search=t.substr(r),t=t.substr(0,r)),t&&(n.pathname=t)}return n}(t):t,{state:n,key:Math.random().toString(36).substr(2,8)})}function y(t,n){return[{usr:t.state,key:t.key,idx:n},g(t)]}function x(t,n,e){return!m.length||(m.call({action:t,location:n,retry:e}),!1)}function w(t){o=t;var n=a();s=n[0],u=n[1],l.call({action:o,location:u})}function E(t){r.go(t)}return null==s&&(s=0,r.replaceState(f({},r.state,{idx:s}),"")),{get action(){return o},get location(){return u},createHref:g,push:function t(n,a){var i=h.Push,o=b(n,a);if(x(i,o,(function(){t(n,a)}))){var c=y(o,s+1),u=c[0],l=c[1];try{r.pushState(u,"",l)}catch(t){e.location.assign(l)}w(i)}},replace:function t(n,e){var a=h.Replace,i=b(n,e);if(x(a,i,(function(){t(n,e)}))){var o=y(i,s),c=o[0],u=o[1];r.replaceState(c,"",u),w(a)}},go:E,back:function(){E(-1)},forward:function(){E(1)},listen:function(t){return l.push(t)},block:function(t){var n=m.push(t);return 1===m.length&&e.addEventListener(p,d),function(){n(),m.length||e.removeEventListener(p,d)}}}}();(new class{constructor(){this.init=()=>{this.view.render(),this.mountListeners()},this.mountListeners=()=>{},this.model=new class{constructor(){this.state={}}},this.view=new class{constructor(){this.render=()=>{this.header.insertAdjacentHTML("afterbegin",'\n<div class="wrapper header__wrapper">\n<h1>RS Lang</h1>\n<nav class="nav">\n<ul class="nav__list">\n<li>\n<a href="/" class="btn" data-btn="main"> Главная </a>\n</li>\n<li>\n<a href="/textbook" class="btn" data-btn="textbook">Учебник</a>\n</li>\n<li>\n  <a href="/games" class="btn" data-btn="games"> Игры </a>\n</li>\n<li>\n  <a href="/stat" class="btn" data-btn="stat"> Статистика </a>\n</li>\n<li>\n  <a href="/login" class="btn inactive" data-btn="login"> Login </a>\n</li>\n</ul>\n</nav>\n</div>\n'),this.main.insertAdjacentHTML("afterbegin",'\n<div class="wrapper">\n<div class="whale">\n    <img src="./assets/whale.svg" alt="">\n  </div>\n</div>\n'),this.footer.insertAdjacentHTML("afterbegin",'<div class="wrapper footer__wrapper">\n<div class="footer__copyright">\n    <span class="copyright">©</span>\n    <span class="year">2022</span>\n</div>\n<div class="footer__info">\n    <a class="github-username" href="https://github.com/ddd-fx" target="_blank" rel="noopener noreferrer">Дмитрий</a>\n    <a class="github-username" href="https://github.com/orla90" target="_blank" rel="noopener noreferrer">Ольга</a>\n    <a class="github-username" href="https://github.com/OutLaw0" target="_blank" rel="noopener noreferrer">Валентин</a>\n</div>\n<a href="https://rs.school/js/" class="rss" target="_blank"> Rolling Scopes School </a>\n</div>'),document.body.append(this.header,this.main,this.footer)},this.header=t("header","header"),this.main=t("main"),this.footer=t("footer")}}}}).init(),m=n("main .wrapper"),g=n(".nav__list"),g.addEventListener("click",(t=>{if(t.preventDefault(),"A"===t.target.tagName){const n=t.target.pathname;b.push(n)}}));const y=new l([{path:"",action:()=>{}},{path:"/textbook",action:()=>{m.innerHTML="<h1>Page Two</h1>"}},{path:"/games",action:()=>{m.innerHTML="<h1>Not Found</h1>"}}]);function x(t){return n=this,e=void 0,a=function*(){console.log(t.pathname),yield y.resolve(t.pathname)},new((r=void 0)||(r=Promise))((function(t,i){function o(t){try{s(a.next(t))}catch(t){i(t)}}function c(t){try{s(a.throw(t))}catch(t){i(t)}}function s(n){var e;n.done?t(n.value):(e=n.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,c)}s((a=a.apply(n,e||[])).next())}));var n,e,r,a}b.listen((({action:t,location:n})=>{x(n)})),x(b.location)})();